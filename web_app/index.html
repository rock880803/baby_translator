<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Babe Translator - AI ÊÉÖÊÑüÂàÜÊûêÂä©Êâã</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #ff6b6b, #ff8e8e);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .content {
            padding: 30px;
        }

        .card {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            border: 1px solid #e9ecef;
        }

        .card h3 {
            color: #495057;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #495057;
        }

        .input-group textarea {
            width: 100%;
            padding: 15px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            font-size: 16px;
            resize: vertical;
            min-height: 120px;
            transition: border-color 0.3s;
        }

        .input-group textarea:focus {
            outline: none;
            border-color: #ff6b6b;
        }

        .button-group {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            flex: 1;
        }

        .btn-primary {
            background: linear-gradient(135deg, #ff6b6b, #ff8e8e);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.4);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #5a6268;
        }

        .mbti-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin-bottom: 20px;
        }

        .mbti-option {
            padding: 15px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }

        .mbti-option:hover {
            border-color: #ff6b6b;
            background: #fff5f5;
        }

        .mbti-option.selected {
            border-color: #ff6b6b;
            background: #fff5f5;
            color: #ff6b6b;
            font-weight: 600;
        }

        .analysis-result {
            background: #e8f5e8;
            border-left: 4px solid #28a745;
            padding: 20px;
            margin: 20px 0;
            border-radius: 0 10px 10px 0;
        }

        .analysis-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            padding: 8px 0;
            border-bottom: 1px solid #d4edda;
        }

        .analysis-item:last-child {
            border-bottom: none;
        }

        .analysis-label {
            font-weight: 600;
            color: #155724;
        }

        .analysis-value {
            color: #155724;
        }

        .replies-section {
            margin-top: 30px;
        }

        .reply-card {
            background: white;
            border: 1px solid #e9ecef;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        .reply-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .reply-style {
            font-weight: 600;
            color: #495057;
        }

        .confidence {
            background: #ff6b6b;
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 14px;
        }

        .reply-content {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            font-style: italic;
            color: #495057;
        }

        .copy-btn {
            background: #28a745;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
        }

        .copy-btn:hover {
            background: #218838;
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #6c757d;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #ff6b6b;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .hidden {
            display: none;
        }

        .needs-list {
            margin-top: 10px;
        }

        .needs-list li {
            margin: 5px 0;
            padding-left: 20px;
            position: relative;
        }

        .needs-list li::before {
            content: "üí°";
            position: absolute;
            left: 0;
        }

        /* Two-column chat layout */
        .two-column-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }
        .chat-column {
            background: #ffffff;
            border: 1px solid #e9ecef;
            border-radius: 12px;
            padding: 16px;
            min-height: 200px;
        }
        .chat-title {
            display: flex;
            align-items: baseline;
            justify-content: space-between;
            margin-bottom: 12px;
        }
        .chat-scroll {
            max-height: 320px;
            overflow-y: auto;
            padding-right: 6px;
        }
        .bubble {
            display: inline-block;
            padding: 10px 14px;
            border-radius: 12px;
            margin: 6px 0;
            max-width: 90%;
            line-height: 1.4;
            word-wrap: break-word;
        }
        .bubble.left {
            background: #f1f3f5;
            color: #212529;
            border-top-left-radius: 4px;
        }
        .bubble.right {
            background: #ffe3e3;
            color: #212529;
            border-top-right-radius: 4px;
            float: right;
            clear: both;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üíï Babe Translator</h1>
            <p>AI ÊÉÖÊÑüÂàÜÊûêÂä©Êâã - Âü∫Êñº MBTI ‰∫∫Ê†ºÈ°ûÂûãÁöÑÊô∫ËÉΩÂõûË¶ÜÂª∫Ë≠∞</p>
        </div>

        <!-- Â∞éË¶ΩÂàóÔºöÈõôÊñπ MBTI Ë®≠ÂÆö -->
        <div class="card" id="navbarMbti">
            <div style="display:flex; gap:12px; align-items:center; flex-wrap:wrap;">
                <div style="font-weight:600; color:#495057;">MBTI Ë®≠ÂÆöÔºö</div>
                <div style="display:flex; gap:8px; align-items:center;">
                    <label for="leftMbtiSelect" style="color:#495057;">Â∞çÊñπÔºö</label>
                    <select id="leftMbtiSelect" style="padding:8px 10px; border:1px solid #e9ecef; border-radius:8px;"></select>
                </div>
                <div style="display:flex; gap:8px; align-items:center;">
                    <label for="rightMbtiSelect" style="color:#495057;">Ëá™Â∑±Ôºö</label>
                    <select id="rightMbtiSelect" style="padding:8px 10px; border:1px solid #e9ecef; border-radius:8px;"></select>
                </div>
            </div>
        </div>

        <div class="content">
            <!-- Ë®äÊÅØËº∏ÂÖ•ÂçÄÂüü -->
            <div class="card">
                <h3>üí¨ Ëº∏ÂÖ•Êàñ‰∏äÂÇ≥Ë®äÊÅØ</h3>
                <div class="input-group">
                    <label for="messageInput">Âè¶‰∏ÄÂçäÁöÑË®äÊÅØÂÖßÂÆπÔºö</label>
                    <textarea id="messageInput" placeholder="Âú®ÈÄôË£°Ëº∏ÂÖ•Âè¶‰∏ÄÂçäÁöÑË®äÊÅØ..."></textarea>
                </div>
                <div class="button-group">
                    <button class="btn btn-secondary" onclick="simulateImageUpload()">üì∑ Ê®°Êì¨‰∏äÂÇ≥ÂúñÁâá</button>
                    <button class="btn btn-secondary" onclick="clearMessage()">üóëÔ∏è Ê∏ÖÈô§</button>
                </div>
            </div>

            <!-- ÈõôÊ¨ÑÂºèÂ∞çË©±‰ªãÈù¢ -->
            <div class="two-column-container">
                <div class="chat-column" id="leftColumn">
                    <div class="chat-title">
                        <span style="font-weight:600; color:#495057;">Â∞çÊñπË®äÊÅØ</span>
                    </div>
                    <div class="chat-scroll" id="leftChat"></div>
                </div>
                <div class="chat-column" id="rightColumn">
                    <div class="chat-title">
                        <span style="font-weight:600; color:#495057;">ÊàëÁöÑÂõûË¶Ü</span>
                    </div>
                    <div class="chat-scroll" id="rightChat"></div>
                </div>
            </div>

            <!-- ÔºàËàäÔºâMBTI ÈÅ∏ÊìáÂçÄÂüüÔºöÊîπÁî±Â∞éË¶ΩÂàóË®≠ÂÆöÔºåÈÄôË£°Èö±Ëóè -->
            <div class="card hidden">
                <h3>üß† ÈÅ∏ÊìáÊÇ®ÁöÑ MBTI ‰∫∫Ê†ºÈ°ûÂûã</h3>
                <div class="mbti-selector" id="mbtiSelector"></div>
            </div>

            <!-- ÂàÜÊûêÊåâÈàï -->
            <div class="button-group">
                <button class="btn btn-primary" onclick="analyzeMessage()" id="analyzeBtn">
                    üîç ÂàÜÊûê‰∏¶ÁîüÊàêÂõûË¶Ü
                </button>
            </div>

            <!-- ËºâÂÖ•‰∏≠ -->
            <div id="loadingSection" class="loading hidden">
                <div class="spinner"></div>
                <p>Ê≠£Âú®ÂàÜÊûêË®äÊÅØ‰∏¶ÁîüÊàêÂõûË¶Ü...</p>
            </div>

            <!-- ÂàÜÊûêÁµêÊûú -->
            <div id="analysisResult" class="analysis-result hidden">
                <h3>üìä ÊÉÖÊÑüÂàÜÊûêÁµêÊûú</h3>
                <div id="analysisContent"></div>
            </div>

            <!-- Âª∫Ë≠∞ÂõûË¶Ü -->
            <div id="repliesSection" class="replies-section hidden">
                <h3>üí° Âª∫Ë≠∞ÂõûË¶Ü</h3>
                <div id="repliesContent"></div>
            </div>
        </div>
    </div>

    <script>
        // MBTI È°ûÂûãÂÆöÁæ©
        const mbtiTypes = {
            'INTJ': 'Âª∫ÁØâÂ∏´ - ÂØåÊúâÊÉ≥ÂÉèÂäõÂíåÊà∞Áï•ÊÄßÁöÑÊÄùÊÉ≥ÂÆ∂',
            'INTP': 'ÈÇèËºØÂ≠∏ÂÆ∂ - ÂØåÊúâÂâµÈÄ†ÂäõÁöÑÁôºÊòéÂÆ∂',
            'ENTJ': 'ÊåáÊèÆÂÆò - Â§ßËÜΩ„ÄÅÂØåÊúâÊÉ≥ÂÉèÂäõÁöÑÈ†òÂ∞éËÄÖ',
            'ENTP': 'ËæØË´ñÂÆ∂ - ËÅ∞ÊòéÂ•ΩÂ•áÁöÑÊÄùÊÉ≥ÂÆ∂',
            'INFJ': 'ÊèêÂÄ°ËÄÖ - ÂÆâÈùúÁ•ûÁßòÁöÑÁêÜÊÉ≥‰∏ªÁæ©ËÄÖ',
            'INFP': 'Ë™øÂÅúËÄÖ - Ë©©ÊÑèÂñÑËâØÁöÑÂà©‰ªñ‰∏ªÁæ©ËÄÖ',
            'ENFJ': '‰∏ª‰∫∫ÂÖ¨ - È≠ÖÂäõÂõõÂ∞ÑÁöÑÈ†òÂ∞éËÄÖ',
            'ENFP': 'Á´∂ÈÅ∏ËÄÖ - ÁÜ±ÊÉÖÊ¥ãÊ∫¢ÁöÑËá™Áî±Á≤æÁ•û',
            'ISTJ': 'Áâ©ÊµÅÂ∏´ - ÂØ¶ÈöõÂèØÈù†ÁöÑ‰∫ãÂØ¶ÁÆ°ÁêÜËÄÖ',
            'ISFJ': 'ÂÆàË°õËÄÖ - ÈùûÂ∏∏Â∞àÊ≥®ÁöÑÂÆàË≠∑ËÄÖ',
            'ESTJ': 'Á∏ΩÁ∂ìÁêÜ - Âá∫Ëâ≤ÁöÑÁÆ°ÁêÜËÄÖ',
            'ESFJ': 'Âü∑ÊîøÂÆò - Ê•µÊúâÂêåÊÉÖÂøÉÁöÑÂçîË™øËÄÖ',
            'ISTP': 'ÈëíË≥ûÂÆ∂ - Â§ßËÜΩÂØ¶ÈöõÁöÑÂØ¶È©óËÄÖ',
            'ISFP': 'Êé¢Èö™ÂÆ∂ - ÈùàÊ¥ªËø∑‰∫∫ÁöÑËóùË°ìÂÆ∂',
            'ESTP': '‰ºÅÊ•≠ÂÆ∂ - Á≤æÊòéÂ§ßËÜΩÁöÑÂØ¶ÂππÂÆ∂',
            'ESFP': 'Ë°®ÊºîËÄÖ - Ëá™ÁôºÁöÑÂ®õÊ®ÇËÄÖ'
        };

        // Â∞éË¶ΩÂàó MBTI ÁãÄÊÖã
        let leftMBTI = null;   // Â∞çÊñπ MBTI
        let rightMBTI = null;  // Ëá™Â∑± MBTI
        // ÂêëÂæåÁõ∏ÂÆπÔºàËàäËÆäÊï∏Ôºâ
        let selectedMBTI = null;

        // ÂàùÂßãÂåñ MBTI ÈÅ∏ÊìáÂô®
        function initMBTISelector() {
            // Â∞éË¶ΩÂàó‰∏ãÊãâ
            const leftSel = document.getElementById('leftMbtiSelect');
            const rightSel = document.getElementById('rightMbtiSelect');
            const addOptions = (sel) => {
                const def = document.createElement('option');
                def.value = '';
                def.textContent = 'Êú™Ë®≠ÂÆö';
                sel.appendChild(def);
                Object.keys(mbtiTypes).forEach(type => {
                    const opt = document.createElement('option');
                    opt.value = type;
                    opt.textContent = type;
                    sel.appendChild(opt);
                });
            };
            addOptions(leftSel);
            addOptions(rightSel);

            leftSel.addEventListener('change', (e) => {
                leftMBTI = e.target.value || null;
            });
            rightSel.addEventListener('change', (e) => {
                rightMBTI = e.target.value || null;
                // ËàáËàäÊµÅÁ®ãÁõ∏ÂÆπ
                selectedMBTI = rightMBTI;
            });
        }

        // ÈÅ∏Êìá MBTI È°ûÂûã
        function selectMBTI(type, element) {
            // Ê∏ÖÈô§‰πãÂâçÁöÑÈÅ∏Êìá
            document.querySelectorAll('.mbti-option').forEach(opt => {
                opt.classList.remove('selected');
            });
            
            // ËàäÁöÑÂç°ÁâáÂ∑≤Èö±ËóèÔºå‰øùÁïôÂáΩÂºèÂÉÖÁÇ∫ÂÖºÂÆπÔºõÂØ¶Èöõ‰ª•Â∞éË¶ΩÂàóÁÇ∫Ê∫ñ
            element.classList.add('selected');
            selectedMBTI = type;
        }

        // Ê®°Êì¨ÂúñÁâá‰∏äÂÇ≥
        function simulateImageUpload() {
            const sampleMessages = [
                "ÊàëÊÉ≥‰Ω†‰∫Ü ‚ù§Ô∏è",
                "‰ªäÂ§©Â∑•‰ΩúÂ•ΩÁ¥ØÔºåÊÉ≥Êä±Êä±‰Ω†",
                "‰Ω†Âú®ÂÅö‰ªÄÈ∫ºÂë¢Ôºü",
                "ÊàëÂÄë‰ªÄÈ∫ºÊôÇÂÄôË¶ãÈù¢Ôºü",
                "‰ªäÂ§©ÂøÉÊÉÖ‰∏çÂ§™Â•Ω...",
                "Ë¨ùË¨ù‰Ω†‰∏ÄÁõ¥Èô™ËëóÊàë üíï"
            ];
            
            const randomMessage = sampleMessages[Math.floor(Math.random() * sampleMessages.length)];
            document.getElementById('messageInput').value = randomMessage;
            // È°ØÁ§∫Âú®Â∑¶ÂÅ¥ÔºàÂ∞çÊñπÔºâÂ∞çË©±Ê°Ü
            appendBubble('left', randomMessage);
        }

        // Ê∏ÖÈô§Ë®äÊÅØ
        function clearMessage() {
            document.getElementById('messageInput').value = '';
        }

        // ÂàÜÊûêË®äÊÅØ
        async function analyzeMessage() {
            const message = document.getElementById('messageInput').value.trim();
            
            if (!message) {
                alert('Ë´ãËº∏ÂÖ•Ë®äÊÅØÂÖßÂÆπÔºÅ');
                return;
            }

            if (!selectedMBTI) {
                alert('Ë´ãÈÅ∏ÊìáÊÇ®ÁöÑ MBTI ‰∫∫Ê†ºÈ°ûÂûãÔºÅ');
                return;
            }

            // È°ØÁ§∫ËºâÂÖ•‰∏≠
            showLoading(true);
            hideResults();

            try {
                // Ê®°Êì¨ API Ë™øÁî®Âª∂ÈÅ≤
                await new Promise(resolve => setTimeout(resolve, 2000));

                // Ê®°Êì¨ÂàÜÊûêÁµêÊûú
                const analysis = {
                    emotion: getRandomEmotion(),
                    tone: getRandomTone(),
                    mood: getRandomMood(),
                    sentimentScore: Math.random() * 0.4 + 0.6, // 0.6-1.0
                    underlyingNeeds: getRandomNeeds()
                };

                // Ê®°Êì¨ÂõûË¶ÜÁîüÊàê
                const replies = generateReplies(message, selectedMBTI, analysis);

                // È°ØÁ§∫ÁµêÊûú
                showAnalysisResult(analysis);
                showReplies(replies);
                
            } catch (error) {
                alert('ÂàÜÊûêÂ§±ÊïóÔºö' + error.message);
            } finally {
                showLoading(false);
            }
        }

        // È°ØÁ§∫ËºâÂÖ•ÁãÄÊÖã
        function showLoading(show) {
            const loadingSection = document.getElementById('loadingSection');
            const analyzeBtn = document.getElementById('analyzeBtn');
            
            if (show) {
                loadingSection.classList.remove('hidden');
                analyzeBtn.disabled = true;
                analyzeBtn.textContent = 'ÂàÜÊûê‰∏≠...';
            } else {
                loadingSection.classList.add('hidden');
                analyzeBtn.disabled = false;
                analyzeBtn.textContent = 'üîç ÂàÜÊûê‰∏¶ÁîüÊàêÂõûË¶Ü';
            }
        }

        // Èö±ËóèÁµêÊûú
        function hideResults() {
            document.getElementById('analysisResult').classList.add('hidden');
            document.getElementById('repliesSection').classList.add('hidden');
        }

        // È°ØÁ§∫ÂàÜÊûêÁµêÊûú
        function showAnalysisResult(analysis) {
            const analysisContent = document.getElementById('analysisContent');
            analysisContent.innerHTML = `
                <div class="analysis-item">
                    <span class="analysis-label">ÊÉÖÁ∑íÔºö</span>
                    <span class="analysis-value">${analysis.emotion}</span>
                </div>
                <div class="analysis-item">
                    <span class="analysis-label">Ë™ûÊ∞£Ôºö</span>
                    <span class="analysis-value">${analysis.tone}</span>
                </div>
                <div class="analysis-item">
                    <span class="analysis-label">ÂøÉÊÉÖÔºö</span>
                    <span class="analysis-value">${analysis.mood}</span>
                </div>
                <div class="analysis-item">
                    <span class="analysis-label">ÊÉÖÊÑüÂàÜÊï∏Ôºö</span>
                    <span class="analysis-value">${(analysis.sentimentScore * 100).toFixed(1)}%</span>
                </div>
                <div class="analysis-item">
                    <span class="analysis-label">ÊΩõÂú®ÈúÄÊ±ÇÔºö</span>
                    <span class="analysis-value">
                        <ul class="needs-list">
                            ${analysis.underlyingNeeds.map(need => `<li>${need}</li>`).join('')}
                        </ul>
                    </span>
                </div>
            `;
            
            document.getElementById('analysisResult').classList.remove('hidden');
        }

        // È°ØÁ§∫Âª∫Ë≠∞ÂõûË¶Ü
        function showReplies(replies) {
            const repliesContent = document.getElementById('repliesContent');
            repliesContent.innerHTML = replies.map((reply, index) => `
                <div class="reply-card">
                    <div class="reply-header">
                        <span class="reply-style">${reply.style.name}</span>
                        <span class="confidence">${(reply.confidence * 100).toInt()}%</span>
                    </div>
                    <div style="font-size: 14px; color: #6c757d; margin-bottom: 10px;">
                        ${reply.style.description}
                    </div>
                    <div class="reply-content">
                        "${reply.content}"
                    </div>
                    <button class="copy-btn" onclick="copyToClipboard('${reply.content.replace(/'/g, "\\'")}')">
                        üìã Ë§áË£ΩÂõûË¶Ü
                    </button>
                </div>
            `).join('');
            
            document.getElementById('repliesSection').classList.remove('hidden');

            // Â∞áÁ¨¨‰∏ÄÂÄãÂª∫Ë≠∞ÂõûË¶ÜÈ°ØÁ§∫Âú®Âè≥ÂÅ¥ÔºàËá™Â∑±Ôºâ
            if (replies && replies.length > 0) {
                appendBubble('right', replies[0].content);
            }
        }

        // ËøΩÂä†Â∞çË©±Ê≥°Ê≥°Âà∞Â∑¶/Âè≥Ê¨Ñ
        function appendBubble(side, text) {
            const container = side === 'left' ? document.getElementById('leftChat') : document.getElementById('rightChat');
            const div = document.createElement('div');
            div.className = `bubble ${side === 'left' ? 'left' : 'right'}`;
            div.textContent = text;
            container.appendChild(div);
            container.scrollTop = container.scrollHeight;
        }

        // Ë§áË£ΩÂà∞Ââ™Ë≤ºÁ∞ø
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                alert('Â∑≤Ë§áË£ΩÂà∞Ââ™Ë≤ºÁ∞øÔºÅ');
            }).catch(err => {
                console.error('Ë§áË£ΩÂ§±ÊïóÔºö', err);
                alert('Ë§áË£ΩÂ§±ÊïóÔºåË´ãÊâãÂãïË§áË£Ω');
            });
        }

        // Èö®Ê©üÁîüÊàêÂàÜÊûêÁµêÊûúÁöÑËºîÂä©ÂáΩÊï∏
        function getRandomEmotion() {
            const emotions = ['ÈóúÂøÉ', 'ÊÉ≥Âøµ', 'ÊÑõÊÑè', 'ÊìîÂøÉ', 'ÈñãÂøÉ', 'Ê∫´Êöñ', 'ÊúüÂæÖ', 'ÊÄùÂøµ'];
            return emotions[Math.floor(Math.random() * emotions.length)];
        }

        function getRandomTone() {
            const tones = ['Ê∫´Êüî', 'Ë¶™Âàá', 'ÁîúËúú', 'È´îË≤º', 'Ê∫´Êöñ', 'ÈóúÊá∑', 'Ê∑±ÊÉÖ', 'ÊüîÂíå'];
            return tones[Math.floor(Math.random() * tones.length)];
        }

        function getRandomMood() {
            const moods = ['ÊÉ≥Âøµ', 'ÈñãÂøÉ', 'Ê∫´Êöñ', 'ÊúüÂæÖ', 'ÊîæÈ¨Ü', 'Âπ∏Á¶è', 'ÊªøË∂≥', 'ÂÆâÂøÉ'];
            return moods[Math.floor(Math.random() * moods.length)];
        }

        function getRandomNeeds() {
            const needs = ['Èô™‰º¥', 'ÈóúÊ≥®', 'ÊÉÖÊÑüÈÄ£Áµê', 'ÁêÜËß£', 'ÊîØÊåÅ', 'ÂÆâÊÖ∞', 'Ê∫ùÈÄö', 'Ë¶™ÂØÜ'];
            const count = Math.floor(Math.random() * 3) + 2; // 2-4 ÂÄãÈúÄÊ±Ç
            return needs.sort(() => 0.5 - Math.random()).slice(0, count);
        }

        // ÁîüÊàêÂõûË¶Ü
        function generateReplies(message, mbtiType, analysis) {
            const replyTemplates = {
                'INTJ': [
                    { content: "Êàë‰πüÂæàÊÉ≥‰Ω† ‚ù§Ô∏è ‰ªäÂ§©ÈÅéÂæóÊÄéÈ∫ºÊ®£Ôºü", style: "Ê∫´ÊöñÂõûÊáâ", description: "Ë°®ÈÅîÂêåÊ®£ÁöÑÊÉÖÊÑü‰∏¶ÈóúÂøÉÂ∞çÊñπ" },
                    { content: "Êä±Ê≠âËÆì‰Ω†ÊÉ≥Êàë‰∫Ü üòä ÊôöÈªûË¶ñË®äÂ•ΩÂóéÔºü", style: "‰∏ªÂãïÂÆâÊéí", description: "ÂõûÊáâÊÉ≥Âøµ‰∏¶ÊèêÂá∫ÂÖ∑È´îË°åÂãï" },
                    { content: "Êî∂Âà∞ÔºÅÈ¶¨‰∏äÂ∞±ÂõûÂéªÈô™‰Ω† üíï", style: "Á´ãÂç≥ÂõûÊáâ", description: "Â±ïÁèæÁ©çÊ•µÊÖãÂ∫¶ÂíåË°åÂãïÂäõ" }
                ],
                'INFP': [
                    { content: "‰Ω†ÁöÑÊÉ≥ÂøµËÆìÊàëÂøÉË£°ÊöñÊöñÁöÑ üå∏ Êàë‰πüÂæàÊÉ≥‰Ω†", style: "Ë©©ÊÑèÂõûÊáâ", description: "Áî®Ê∫´ÊüîÁöÑË™ûË®ÄË°®ÈÅîÊÉÖÊÑü" },
                    { content: "Ë¨ùË¨ù‰Ω†ÂëäË®¥Êàë‰Ω†ÁöÑÊÑüÂèó üíù ÈÄôËÆìÊàëË¶∫ÂæóÂæàÁâπÂà•", style: "ÊÉÖÊÑüÂÖ±È≥¥", description: "ÈáçË¶ñÊÉÖÊÑü‰∫§ÊµÅ‰∏¶Ë°®ÈÅîÊÑüË¨ù" },
                    { content: "ÊàëÂÄëÁöÑÂøÉÁ∏ΩÊòØÈÄ£Âú®‰∏ÄËµ∑ÁöÑ ‚ú® Ë∑ùÈõ¢‰∏çÊòØÂïèÈ°å", style: "Êµ™Êº´ÂõûÊáâ", description: "Áî®Êµ™Êº´ÁöÑÊñπÂºèË°®ÈÅîÈÄ£ÁµêÊÑü" }
                ],
                'ENFP': [
                    { content: "ÂìáÔºÅÊàë‰πüË∂ÖÊÉ≥‰Ω†ÁöÑÔºÅüòç ÊàëÂÄë‰ªÄÈ∫ºÊôÇÂÄôË¶ãÈù¢Ôºü", style: "ÁÜ±ÊÉÖÂõûÊáâ", description: "Áî®ÁÜ±ÊÉÖÂíåËààÂ•ÆÂõûÊáâ" },
                    { content: "‰Ω†ÁöÑÊÉ≥ÂøµËÆìÊàëË∂ÖÈñãÂøÉÁöÑÔºÅüéâ ÊàëÂÄë‰æÜË®àÁï´ÂÄãÈ©öÂñúÂêßÔºÅ", style: "ÂâµÊÑèÂõûÊáâ", description: "ÊèêÂá∫ÂâµÊÑèÊÉ≥Ê≥ïÂíåÈ©öÂñú" },
                    { content: "Êàë‰πüÊÉ≥‰Ω†ÊÉ≥Âà∞‰∏çË°åÔºÅüíñ ÊàëÂÄë‰æÜËÅäËÅä‰ªäÂ§©ÁôºÁîüÁöÑ‰∫ãÂêßÔºÅ", style: "Ê¥ªÊΩëÂõûÊáâ", description: "Â±ïÁèæÊ¥ªÊΩëÂíåÂ•ΩÂ•áÂøÉ" }
                ]
            };

            const templates = replyTemplates[mbtiType] || replyTemplates['INTJ'];
            
            return templates.map(template => ({
                content: template.content,
                style: {
                    name: template.style,
                    description: template.description
                },
                confidence: Math.random() * 0.2 + 0.8 // 0.8-1.0
            }));
        }

        // È†ÅÈù¢ËºâÂÖ•ÊôÇÂàùÂßãÂåñ
        document.addEventListener('DOMContentLoaded', function() {
            initMBTISelector();
        });
    </script>
</body>
</html>

